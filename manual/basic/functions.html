
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">


<head profile="http://purl.org/net/ns/metaprof">
 <meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8" />
 <meta http-equiv="content-style-type" content="text/css" />

 <title>Manual/Basic/Functions - AYAYA/03</title>
 <link rel="stylesheet" href="../../style.css" type="text/css" media="screen" charset="UTF-8" />
 <!--<link rel="stylesheet" href="skin/default.css" type="text/css" media="screen" charset="UTF-8" />-->
 <!--<link rel="stylesheet" href="skin/print.css" type="text/css" media="print" charset="UTF-8" />-->
 <!--<link rel="stylesheet" href="/svgd/table.css" type="text/css" />-->
 <!--<link rel="alternate" type="application/rss+xml" title="RSS" href="../../cmd=mixirss&amp;ver=0.91.html" />--> 
 <script type="text/javascript">
 <!--
 // -->
 IMAGE_DIR = 'image/';
 SKIN_DIR = 'skin/';
 </script>
<!-- <script type="text/javascript" src="skin/lang/.js"></script> -->
<!--<script type="text/javascript" src="skin/default.js"></script>-->
<!-- <script type="text/javascript" src="skin/ajax/textloader.js"></script> -->
<!-- <script type="text/javascript" src="skin/ajax/glossary.js"></script> -->
 <!--<script type="text/javascript" src="skin/tzCalculation_LocalTimeZone.js"></script>-->
</head>

<body>
<p id="original_doc_link">https://emily.shillest.net/ayaya/index.php?マニュアル/基本/関数</p>

<div id="interface_header"></div>

<div id="interface_content">
   <div id="body">
<ul class="navi">
 <li class="navi_left"><a href="../../manual/basic/arrays.html" title="Manual/Basic/Arrays" class="link_page_passage">Prev</a></li>
 <li class="navi_right"></li>
 <li class="navi_none"><a href="../../manual/basic.html" class="link_page_passage">Manual/Basic</a></li>
</ul>
<hr class="full_hr" />
<h2 id="content_1_0">関数<a class="anchor_super" id="n5a1e946" href="#n5a1e946" style="user-select:none;">&dagger;</a></h2>
<div class="contents">
<a id="contents_1"></a>
<ul class="list1 list-indent1"><li><a href="#n5a1e946">関数</a></li>
<li><a href="#taf16c8e">基本</a></li>
<li><a href="#n5a1e946">引数</a></li>
<li><a href="#o45f5801">自身の関数名</a></li>
<li><a href="#n5a1e946">変数の定義</a>
<ul class="list3 list-indent2"><li><a href="#b6493b63">ローカル変数</a></li>
<li><a href="#d08d255a">グローバル変数</a></li></ul></li>
<li><a href="#v79f5ca7">呼び出し回数制限</a></li></ul>
</div>

<p>関数名は全角文字も使えます。</p>
<p>また、変数の定義はローカル、グローバル問わず関数内でしかできないことに注意してください。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_1">基本<a class="anchor_super" id="taf16c8e" href="#taf16c8e" style="user-select:none;">&dagger;</a></h2>
<pre class="aya">Test{
 &quot;Hello World!&quot;
}</pre>
<p>このTest関数は文字列&quot;Hello World!&quot;を出力します。
YAYAの特徴として、代入式でないただの変数や文字列(この例における&quot;Hello World!&quot;)が存在すると、それが返り値として扱われます。</p>
<p>つまり</p>
<pre class="aya">Test{
 _A = 10
 _B = 11+32 
 &quot;Hello World!&quot;
}</pre>
<p>としても、返り値は&quot;Hello World!&quot;となります。
また、</p>
<pre class="aya">Test{
　A = 10
 &quot;Hello World!&quot;
 &quot;Hallo Welt!&quot;
 10
 11+32
}</pre>
<p>のように返り値の候補が複数存在すると、それらのうちいずれかがランダムで選ばれます(この例では&quot;Hello World!&quot;, &quot;Hallo Welt!&quot;, 10, 43)。</p>
<p>また、中括弧は</p>
<pre class="aya">Test
{
 &quot;Hello World!&quot;
 &quot;Hallo Welt!&quot;
}</pre>
<p>のように書いても構いません。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_2">Arguments<a class="anchor_super" id="arguments" href="#n5a1e946" style="user-select:none;">&dagger;</a></h2>
<p>関数には引数を与えることができます。このとき受け取った引数はローカル変数の配列_argvに書格納され、_argcに引数の数(_argvのサイズ)が格納されます。</p>
<p>例えば</p>
<pre class="aya">てすと{
 &quot;入力は「&quot;+_argv[0]+&quot;」だよ&quot;
}</pre>
<p>という関数を定義し、</p>
<pre class="aya">てすと(&quot;うかがか&quot;)</pre>
<p>のように実行すると、&quot;入力は「うかがか」だよ&quot;が出力されます。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_3">自身の関数名<a class="anchor_super" id="o45f5801" href="#o45f5801" style="user-select:none;">&dagger;</a></h2>
<p>ローカル変数 _FUNC_NAME_ には現在実行中の関数名が入ります。<br />
各種の動的定義命令(<a href="../../manual/function/APPEND_RUNTIME_DIC.html" title="Manual/Function/APPEND_RUNTIME_DIC" class="link_page_passage">APPEND_RUNTIME_DIC</a>など)の拡充に伴い、利便性のために追加されました。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_4">変数の定義<a class="anchor_super" id="n5a1e946" href="#n5a1e946" style="user-select:none;">&dagger;</a></h2>
<p>関数内では自由に変数を宣言することができます。このとき変数名が&quot;_&quot;からはじまるものはローカル、そうでないものはグローバル変数として扱われます。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h4 id="content_1_5">ローカル変数<a class="anchor_super" id="b6493b63" href="#b6493b63" style="user-select:none;">&dagger;</a></h4>
<p>その変数が定義された中括弧内でしか使えない変数です。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h4 id="content_1_6">グローバル変数<a class="anchor_super" id="d08d255a" href="#d08d255a" style="user-select:none;">&dagger;</a></h4>
<p>関数が実行されて一度定義されてしまうと、どこでも使える変数になります。<br />
なお、グローバル変数はゴーストを終了しても保持されます。消去したい場合は<a href="../../manual/function/ERASEVAR.html" title="Manual/Function/ERASEVAR" class="link_page_passage">ERASEVAR</a>関数を使う必要があります。</p>
<pre class="aya">テスト2{
 _aa = 200//これはローカル
 bb = 200//これはグローバル
}</pre>
<p>その関数内でしか使わない変数などは、なるべくローカル変数を使うようにしたほうがバグが出にくくなります。たとえばループ処理のラベルなどでは</p>
<pre class="aya">テスト2{
 for _i = 0; _i &lt;10; _i++{
  _i+&quot;\n&quot;
 }
}</pre>
<p>のようにローカル変数(_i)を使ってください。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_7">呼び出し回数制限<a class="anchor_super" id="v79f5ca7" href="#v79f5ca7" style="user-select:none;">&dagger;</a></h2>
<p><a href="../../manual/syntax/1_basic_settings.html#p6bb4967" title="Manual/Syntax/1. Basic settings" class="link_page_passage">基礎設定ファイルのfncdepth</a> で関数の呼び出し深さ（回数ではない）の設定ができます。標準は32階層です。<br />
制限に到達した時は shiori.<span class="noexists"><a href="../../cmd=edit&amp;page=OnCallLimit&amp;refer=manual%2F%E5%9F%BA%E6%9C%AC%2_functions.html">OnCallLimit</a></span>(関数名,行) が呼ばれます。<br />
実行中にメモリを使い果たした時は shiori.<span class="noexists"><a href="../../cmd=edit&amp;page=OnMemoryLimit&amp;refer=manual%2F%E5%9F%BA%E6%9C%AC%2_functions.html">OnMemoryLimit</a></span>() が呼ばれますが、スタックオーバーフローを捉えることはできません。</p>
<hr class="full_hr" />
<ul class="navi">
 <li class="navi_left"><a href="../../manual/basic/arrays.html" title="Manual/Basic/Arrays" class="link_page_passage">Prev</a><br /><a href="../../manual/basic/arrays.html" class="link_page_passage">Manual/Basic/Arrays</a></li>
 <li class="navi_right"><br /></li>
 <li class="navi_none"><a href="../../manual/basic.html" title="Manual/Basic" class="link_page_passage">Home</a><br /><a href="../../manual/basic.html" title="Manual/Basic" class="link_page_passage">Up</a></li>
</ul>
   
   	 	
	</div>
</div>




<table cellspacing=0 width=100%>
<tr><td id=footer>


<div id="lastmodified">
 Last modified on: 2021-11-23 (Tuesday) 15:59:55<span class="page_passage"></span></div>


<div id="related">
 Related pages: <a href="../../manual/basic.html">Manual/Basic</a><span class="page_passage"></span>
 <a href="../../manual/syntax/1_basic_settings.html">Manual/Syntax/1. Basic settings</a><span class="page_passage"></span>
 <a href="../../manual/function/APPEND_RUNTIME_DIC.html">Manual/Function/APPEND_RUNTIME_DIC</a><span class="page_passage"></span>
 <a href="../../manual/function/ERASEVAR.html">Manual/Function/ERASEVAR</a><span class="page_passage"></span>
 <a href="../../manual/basic/arrays.html">Manual/Basic/Arrays</a><span class="page_passage"></span></div>


</td></tr>
</table>

<div id="interface_footer"></div>

<script src="../../interface.js"></script>

</body>
</html>
