
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">


<head profile="http://purl.org/net/ns/metaprof">
 <meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8" />
 <meta http-equiv="content-style-type" content="text/css" />

 <title>トークべた書き支援ライブラリ - AYAYA/03</title>
 <link rel="stylesheet" href="style.css" type="text/css" media="screen" charset="UTF-8" />
 <!--<link rel="stylesheet" href="skin/default.css" type="text/css" media="screen" charset="UTF-8" />-->
 <!--<link rel="stylesheet" href="skin/print.css" type="text/css" media="print" charset="UTF-8" />-->
 <!--<link rel="stylesheet" href="/svgd/table.css" type="text/css" />-->
 <!--<link rel="alternate" type="application/rss+xml" title="RSS" href="index.php?cmd=mixirss&amp;ver=0.91" />--> 
 <script type="text/javascript">
 <!--
 // -->
 IMAGE_DIR = 'image/';
 SKIN_DIR = 'skin/';
 </script>
<!-- <script type="text/javascript" src="skin/lang/.js"></script> -->
<!--<script type="text/javascript" src="skin/default.js"></script>-->
<!-- <script type="text/javascript" src="skin/ajax/textloader.js"></script> -->
<!-- <script type="text/javascript" src="skin/ajax/glossary.js"></script> -->
 <!--<script type="text/javascript" src="skin/tzCalculation_LocalTimeZone.js"></script>-->
</head>

<body>

<div id="interface_header"></div>

<div id="interface_content">
   <div id="body"><h2 id="content_1_0">トークべた書き支援ライブラリ「あやりりすEX」<a class="anchor_super" id="babc9ebb" href="index.php?%E3%83%88%E3%83%BC%E3%82%AF%E3%81%B9%E3%81%9F%E6%9B%B8%E3%81%8D%E6%94%AF%E6%8F%B4%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA#babc9ebb" style="user-select:none;">&dagger;</a></h2>
<p>いちいちウエイトタグ書いてるのが面倒？</p>
<p>\s[]とか書いてたらヒマかかりすぎ？</p>
<p>SakuraScriptで文章書いたら後で推敲しにくくて困る？</p>
<p>……なら、これだ。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_1">概要<a class="anchor_super" id="vb9a6dc4" href="index.php?%E3%83%88%E3%83%BC%E3%82%AF%E3%81%B9%E3%81%9F%E6%9B%B8%E3%81%8D%E6%94%AF%E6%8F%B4%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA#vb9a6dc4" style="user-select:none;">&dagger;</a></h3>
<blockquote><p class="quotation">&quot;\u\s[10]\0\s[2]…\w5…\w5…\w5…\w5…\w5\w9\w9\1なんや、\w5アホみたいな顔してからに。\w9\w9\0\s[7]\n\nバッテリーがヘタりかけてるのに、\w9\n休止状態で放置しないでください！\w9\nばかになるでしょ！\w9\w9\1\n\n…\w5…\w5もともと賢い事ないがな。\w9\w9\0\s[26]\n\n…\w5…\w5…\w5…\w5\e&quot;</p></blockquote>
<p>こんな辞書が…</p>
<pre>&lt;&lt;&quot;
ま０５：分かりました！分かりましたよ！２０年モノのパソコンがどうなるのか！
し１０：スクラップやのうて？
ま　　：付喪神っていう便利な言葉が、世の中にはあるんですよ！
し１１：…まあ、ゴーストにはなったがな？
&quot;&gt;&gt;</pre>
<p>こうなります。</p>
<p><strong>導入しても、通常のSakuraScriptの1行で書かれたトークはそのままスルーパス（あるいは句読点だけウエイトなどの調整可能）します。</strong></p>
<p><strong>文中のSakuraScriptはそのまま実行されます。細かく調整したい場合や。途中で単純な喋り以外の機能を呼び出したい時は、SakuraScriptをそのまま書いて下さい。</strong></p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_2">実運用サンプル<a class="anchor_super" id="of85b014" href="index.php?%E3%83%88%E3%83%BC%E3%82%AF%E3%81%B9%E3%81%9F%E6%9B%B8%E3%81%8D%E6%94%AF%E6%8F%B4%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA#of85b014" style="user-select:none;">&dagger;</a></h3>
<p><a href="http://ssp.shillest.net/ghost.html" rel="nofollow">http://ssp.shillest.net/ghost.html</a></p>
<ul class="list1 list-indent1"><li>the &quot;<span class="noexists"><a href="index.php?cmd=edit&amp;page=MobileMaster&amp;refer=%E3%83%88%E3%83%BC%E3%82%AF%E3%81%B9%E3%81%9F%E6%9B%B8%E3%81%8D%E6%94%AF%E6%8F%B4%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA">MobileMaster</a></span>&quot;</li>
<li>とらふぃっく☆とれいん</li>
<li>メリーさんの電話</li></ul>
<p><a href="http://ms.shillest.net/" rel="nofollow">http://ms.shillest.net/</a></p>
<ul class="list1 list-indent1"><li>いまいち萌えない娘</li>
<li>とらぶる☆ばぐとらっく</li></ul>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_3">下ごしらえ<a class="anchor_super" id="jaa7788a" href="index.php?%E3%83%88%E3%83%BC%E3%82%AF%E3%81%B9%E3%81%9F%E6%9B%B8%E3%81%8D%E6%94%AF%E6%8F%B4%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA#jaa7788a" style="user-select:none;">&dagger;</a></h3>
<ol class="list1 list-indent1"><li>最新のシステム辞書と、最新のYAYAの機能をふんだんに利用していますので、yaya.dllの上書きと「システム辞書」の上書きをお願いします。</li>
<li><a href="http://ms.shillest.net/ghost/mobilemaster/ghost/master/aya_lilith_ex.dic" rel="nofollow">aya_lilith_ex.dic</a> と <a href="http://ms.shillest.net/ghost/mobilemaster/ghost/master/aya_lilith_ex_config.dic" rel="nofollow">aya_lilith_ex_config.dic</a> を保存し、ghost/master以下に格納します。</li>
<li>yaya.txtの<strong>include, system_config.txt</strong>直後あたりに、<br />
dic, aya_lilith_ex.dic<br />
dic, aya_lilith_ex_config.dic<br />
を追記してください。</li></ol>
<p><strong>aya_lilith_ex_config.dic</strong> を開き、<strong>あやりりすEXヘッダ0</strong>・<strong>あやりりすEXヘッダ1</strong>をそれぞれ適切に設定して下さい。設定の仕方は辞書内のコメントに記述していますが、通常使いたい1文字の候補を複数書いて [まマ] のように大カッコでくくればOKです。</p>
<p>※発展：この部分には正規表現が利用できます。2文字以上使いたい場合などは工夫してみてください。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_4">使い方<a class="anchor_super" id="m5494897" href="index.php?%E3%83%88%E3%83%BC%E3%82%AF%E3%81%B9%E3%81%9F%E6%9B%B8%E3%81%8D%E6%94%AF%E6%8F%B4%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA#m5494897" style="user-select:none;">&dagger;</a></h3>
<p>YAYAの比較的新しいバージョンで追加された、複数行テキスト記述機能（ヒアドキュメント）を使用しています。</p>
<p>&quot; &quot; で囲まれるテキストは</p>
<pre>&lt;&lt;&quot;
&quot;&gt;&gt;</pre>
<p>' ' で囲まれるテキストは</p>
<pre>&lt;&lt;'
'&gt;&gt;</pre>
<p>と同等になります。この2つの書き方の違いは、後者が複数行べた書きできる点だけです。</p>
<p>これを使い、基本的には以下のように書きます。</p>
<pre>&lt;&lt;&quot;
ま０５：分かりました！分かりましたよ！２０年モノのパソコンがどうなるのか！
し１０：スクラップやのうて？
ま　　：付喪神っていう便利な言葉が、世の中にはあるんですよ！
し１１：…まあ、ゴーストにはなったがな？
&quot;&gt;&gt;</pre>
<p>頭の1文字「ま」「し」は、それぞれaya_lilith_ex_config.dicで設定した文字にしてください。</p>
<p>その後ろの全角数字はサーフィス番号（表情ID）です。半角でも通ります。</p>
<p>句読点や改行時のウエイト等は、適宜自動的に挿入されます。通常はそのままべた書きしてください。</p>
<p>何か特殊なことをしたい場合は、SakuraScriptがそのまま使えます。また、従来通りのSakuraScriptを含む1行のテキストとの共存も可能です。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_5">文法<a class="anchor_super" id="c8eb7517" href="index.php?%E3%83%88%E3%83%BC%E3%82%AF%E3%81%B9%E3%81%9F%E6%9B%B8%E3%81%8D%E6%94%AF%E6%8F%B4%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA#c8eb7517" style="user-select:none;">&dagger;</a></h3>
<pre>ま０５：てすとてすと</pre>
<p>「：」より前が表情やその他オプションを定義する部分、後ろが喋る文字です。</p>
<p>設定した1文字＋サーフィス番号：テキスト、が基本形です。サーフィス番号（表情ID）は、半角・全角どちらでも使えますが、日本語変換モードのまま全角で打ち込むと楽です。</p>
<pre>ま０５「かぎかっこでもいけるよ」</pre>
<p>カギカッコで区切ってもOKですが、ちゃんとカッコは閉じてください。</p>
<pre>ま消：きゃー消えちゃった―</pre>
<p>番号のかわりに「消」と書くと、ウインドウが消えます（キャラが隠れます）</p>
<pre>ま　：さっきの表情のままね</pre>
<p>何も書かないと前の表情のままです。スペース（全角・半角問わず）は無視されます。</p>
<pre>二人：バルス！</pre>
<p>「二人」と書くと二人同時に喋ります。</p>
<pre>ま０７し１１二人：バルス！</pre>
<p>この書き方は複数つなぎあわせることもできます。上記の例の場合、キャラ二人をそれぞれ7番・11番の表情に変えてから、同時に喋ります。</p>
<pre>待ち無しま０５：あまり待たない
待ちゼロま０５：ぜんぜん待たない
待ち多めま０５：ふつうより長めに待つ</pre>
<p>直後にツッコミを入れたい、また長めに悩んでいる演出を入れたい、という時のために、このように喋り出す前の待ち時間を制御することができます。なお、<strong>まったく書かなくても標準で適宜待ち時間が入ります</strong>。</p>
<pre>クリック待ちま０７：クリック待ってる</pre>
<p>クリック待ち、と書くと、喋り出す前にバルーンをクリックしてくれるのを待ちます。</p>
<pre>改行無しま０５：改行しないよ</pre>
<p>改行無し、と書くと、前に喋った内容から改行せず表情だけを変えることができます。</p>
<pre>改行多めま０８：改行しまくり！</pre>
<p>ちょっと多めに改行します。段落の区切りなどに。</p>
<pre>ま００：（ユーザ）さん！</pre>
<p>ユーザ名を途中に挿入します。：の後、喋る文字の部分にのみ適用されます。</p>
<pre>ま０５：（チョコ｜菓子パン｜ケーキ）食べよう！</pre>
<p>｜で区切って文字列を書き、カッコでくくるとランダム選択になります。</p>
<pre>＃コメントなので無視</pre>
<p>＃ではじまる行は完全に無視されます。</p>
<pre>＠設定：パッシブモード
＠設定：クイックセクション
＠設定：タイムアウト1000「時間切れ」</pre>
<p>「＠設定：」ではじまる行は、以降の喋りに関係するオプション設定です。上のサンプルはそれぞれ、</p>
<ul class="list1 list-indent1"><li>パッシブモード（マウス反応以外すべて無視）</li>
<li>クイックセクション（全文字ウエイト無視で一瞬で表示）</li>
<li>タイムアウト（以降に続く数字のミリ秒間待つ、待ったら「」でくくった名前の関数を呼ぶ）</li></ul>
<p>になります。</p>
<pre>＠メニュー：さんぷる１｜Sample1Execute
＠半分メニュー：さんぷる２｜さんぷる２実行
＠改行多めメニュー：さんぷる３｜OnTest3Exec｜R0
＠クリック待ちメニュー：さんぷる４｜さんぷる4実行</pre>
<p>「＠～メニュー：」ではじまる行は、メニュー表示です。<br />
半分メニューは標準サイズバルーンに横2つずつ並べる表示です。<br />
改行多めとつけると、1行改行が1行半になります。選択肢の区切りなどに。<br />
クリック待ちとつけると、そのメニューを表示した直後でクリック待ち(\x)に入ります。</p>
<p>後ろは｜区切りです。最初の項目が表示するテキスト、2つ目以降は実行する関数／イベントです。</p>
<p>なお、<strong>メニュー内は自動でクイックセクション</strong>になり、一気にウエイトなしで表示されます。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_6">自動チェイントークとランダム選択<a class="anchor_super" id="w9e81368" href="index.php?%E3%83%88%E3%83%BC%E3%82%AF%E3%81%B9%E3%81%9F%E6%9B%B8%E3%81%8D%E6%94%AF%E6%8F%B4%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA#w9e81368" style="user-select:none;">&dagger;</a></h3>
<pre>ま０５：ちぇいんてすと。
し１０：うまくいくやろか。
=====
ま０５：ちぇいん2-Aにきたよ。
し１０：成功やね。
-----
ま０５：ちぇいん2-Bにきたよ。
し１０：ここはランダムや。</pre>
<p>===== (=が5つ以上) で区切るとチェイントーク、----- (-が5つ以上) で区切るとランダム選択になります。</p>
<p>例えば上の例の場合、最初の ===== までを喋った後いったん終わり、次のランダムトークを喋るタイミングで、2つめと3つめのトークからどちらかを喋ります。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_7">FAQ<a class="anchor_super" id="t4ab4bcc" href="index.php?%E3%83%88%E3%83%BC%E3%82%AF%E3%81%B9%E3%81%9F%E6%9B%B8%E3%81%8D%E6%94%AF%E6%8F%B4%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA#t4ab4bcc" style="user-select:none;">&dagger;</a></h3>
<dl class="list1 list-indent1"><dt>なぜEX？</dt>
<dd>イベント処理支援ライブラリ「あやりりす」っていうのがあったんですが、こちらはまだいろいろ依存がありすぎて切り離せない…。ちなみに、さらに他に用語解説用ライブラリもあったりします。</dd></dl>
<dl class="list1 list-indent1"><dt>なぜ書いたし</dt>
<dd>いや、Twitterなどでネタいただくのはいいんですが、　ラ「ごにょごにょ」テ「ごにょごにょ」　といった形式を一々全部SakuraScriptに直すのが<strong>ものすごく面倒</strong>で……</dd></dl>
<dl class="list1 list-indent1"><dt>まとめて開発版で怪しいことしたいです。</dt>
<dd>the &quot;<span class="noexists"><a href="index.php?cmd=edit&amp;page=MobileMaster&amp;refer=%E3%83%88%E3%83%BC%E3%82%AF%E3%81%B9%E3%81%9F%E6%9B%B8%E3%81%8D%E6%94%AF%E6%8F%B4%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA">MobileMaster</a></span>&quot;・とらふぃっく☆とれいんをデバッグ用前線扱いで運用中です。</dd></dl>
<dl class="list1 list-indent1"><dt>選択肢とかも書けるようにして果ては里々並に…</dt>
<dd>そんなごちゃごちゃしたのはふつうにSakuraScript書きなさいって…</dd></dl>
   
   	 	
	</div>
</div>




<table cellspacing=0 width=100%>
<tr><td id=footer>


<div id="lastmodified">
 Last modified on: 2012-10-28 (Sunday) 13:15:25<span class="page_passage"></span></div>


<div id="related">
 Related pages: <a href="index.php?MenuBar">MenuBar</a><span class="page_passage"></span></div>


</td></tr>
</table>

<div id="interface_footer"></div>

<script src="interface.js"></script>

</body>
</html>
