
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">


<head profile="http://purl.org/net/ns/metaprof">
 <meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8" />
 <meta http-equiv="content-style-type" content="text/css" />

 <title>StartUp/Migrate from Satori - AYAYA/03</title>
 <link rel="stylesheet" href="../style.css" type="text/css" media="screen" charset="UTF-8" />
 <!--<link rel="stylesheet" href="skin/default.css" type="text/css" media="screen" charset="UTF-8" />-->
 <!--<link rel="stylesheet" href="skin/print.css" type="text/css" media="print" charset="UTF-8" />-->
 <!--<link rel="stylesheet" href="/svgd/table.css" type="text/css" />-->
 <!--<link rel="alternate" type="application/rss+xml" title="RSS" href="../cmd=mixirss&amp;ver=0.91.html" />--> 
 <script type="text/javascript">
 <!--
 // -->
 IMAGE_DIR = 'image/';
 SKIN_DIR = 'skin/';
 </script>
<!-- <script type="text/javascript" src="skin/lang/.js"></script> -->
<!--<script type="text/javascript" src="skin/default.js"></script>-->
<!-- <script type="text/javascript" src="skin/ajax/textloader.js"></script> -->
<!-- <script type="text/javascript" src="skin/ajax/glossary.js"></script> -->
 <!--<script type="text/javascript" src="skin/tzCalculation_LocalTimeZone.js"></script>-->
</head>

<body>

<div id="interface_header"></div>

<div id="interface_content">
   <div id="body"><h2 id="content_1_0">里々からYAYAへ移行する<a class="anchor_super" id="ke0d0ecc" href="../startup/migrate_from_satori.html#ke0d0ecc.html" style="user-select:none;">&dagger;</a></h2>
<p>主に里々しかSHIORIを使った事が無いけどYAYAも使ってみたい！という人向けの説明文です。<br /></p>
<div class="contents">
<a id="contents_1"></a>
<ul class="list1 list-indent1"><li><a href="#ke0d0ecc">里々からYAYAへ移行する</a></li>
<li><a href="#yd6505d2">はじめに</a>
<ul class="list2 list-indent1"><li><a href="#z8a1faa1">里々からYAYAにする利点</a></li>
<li><a href="#m016c7aa">YAYAへの素朴な疑問集</a>
<ul class="list3 list-indent1"><li><a href="#yeeb8ad9">バリバリ理系向けのSHIORIって聞いたけど…</a></li>
<li><a href="#qc29f786">プログラミングやC言語やった事ある人しか使えないの？</a></li>
<li><a href="#e9d57da4">里々より難しいんでしょ？</a></li>
<li><a href="#ca087606">重いって本当？</a></li>
<li><a href="#pc33961c">ファイル操作や正規表現ってYAYAしか使えないの？</a></li>
<li><a href="#t264cef6">里々だと絶対作れないようなゴーストが作れるようになる？</a></li></ul></li>
<li><a href="#u3ee1de7">注意点</a></li>
<li><a href="#qa625c4e">準備しておいたほうがよいもの</a></li></ul></li>
<li><a href="#hcfdaf26">YAYAの辞書を書いてみる</a>
<ul class="list2 list-indent1"><li><a href="#me9643b5">基本</a></li>
<li><a href="#yc594c97">改行する</a></li>
<li><a href="#i74d4072">単語や文章をランダムで選ぶ</a></li>
<li><a href="#d9cc0463">変数</a>
<ul class="list3 list-indent1"><li><a href="#v9f96732">文字列と数値</a></li>
<li><a href="#gd41ca5e">グローバルとローカルの違い</a></li>
<li><a href="#a87ba410">変数の代入</a></li>
<li><a href="#a61ce42f">変数の計算</a></li></ul></li>
<li><a href="#xbdc6578">分岐</a></li>
<li><a href="#rd2a3a4b">Ｒ０とかＳ０とかＡ０のYAYAでの書き方</a></li>
<li><a href="#fca00fd6">ssuみたいなこと</a></li>
<li><a href="#vd442bfc">SAORI</a>
<ul class="list3 list-indent1"><li><a href="#maff9ab3">つかいかた</a></li>
<li><a href="#oab51c89">返り値 Result</a></li>
<li><a href="#h55dd7e3">返り値 Value[n]</a></li></ul></li>
<li><a href="#k1ed6212">☆現在時刻を表示</a></li>
<li><a href="#l9a16687">☆タイマー （＄○○タイマ【タブ】秒数）</a></li>
<li><a href="#g29dd3e7">replace.txt</a></li>
<li><a href="#s674ca8a">☆replace_after.txt</a></li>
<li><a href="#v1534609">シェルの見切れ・重なり反応をつける</a></li>
<li><a href="#ta5d62ba">Φのように危険な記号を無効化する</a></li>
<li><a href="#ncce31d5">コメントアウト</a></li></ul></li>
<li><a href="#dbf6357e">里々からYAYAに移行した人にありがちな疑問</a>
<ul class="list2 list-indent1"><li><a href="#p4111ec3">ゴーストを起動しても全く動かない！</a></li>
<li><a href="#w9ffd6bb">satori_savedata.txt（セーブデータ）どこー？</a></li>
<li><a href="#t2e56fb4">エイリアスエラーが出たけどこれって何？</a></li>
<li><a href="#va63791e">そのほか</a></li></ul></li></ul>
</div>


<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_1">はじめに<a class="anchor_super" id="yd6505d2" href="../startup/migrate_from_satori.html#yd6505d2.html" style="user-select:none;">&dagger;</a></h2>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_2">里々からYAYAにする利点<a class="anchor_super" id="z8a1faa1" href="../startup/migrate_from_satori.html#z8a1faa1.html" style="user-select:none;">&dagger;</a></h3>
<p>プログラミング的な事をするのに強いので、ゴーストのトーク以外の部分がごちゃごちゃしてきて書くのが面倒な場合楽になります。<br />
でもそれは特にYAYAだけに限った特性ではなく、<a href="http://www.towano.net/wk_kwr/" rel="nofollow">華和梨</a>という選択肢もあります。<br />
更新が停止していても良いならそれ以外のSHIORIも選択肢に入ります(ただし、それらはもし不具合が発見されても修正は望めません)<br />
SHIORIの特性を把握し、自分で使いやすそうなSHIORIを選ぶのが良いでしょう。<br /></p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_3">YAYAへの素朴な疑問集<a class="anchor_super" id="m016c7aa" href="../startup/migrate_from_satori.html#m016c7aa.html" style="user-select:none;">&dagger;</a></h3>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h4 id="content_1_4">バリバリ理系向けのSHIORIって聞いたけど…<a class="anchor_super" id="yeeb8ad9" href="../startup/migrate_from_satori.html#yeeb8ad9.html" style="user-select:none;">&dagger;</a></h4>
<p>「文系で今まで里々しか使ってなかったけどYAYAが肌に合ってて使いやすかった」と言っていた人も何人かいます。<br />
つまりYAYAが向いてるかどうかは理系かどうかは関係なく、その人との相性によります。本人が実際使ってみないとなんとも言えません。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h4 id="content_1_5">プログラミングやC言語やった事ある人しか使えないの？<a class="anchor_super" id="qc29f786" href="../startup/migrate_from_satori.html#qc29f786.html" style="user-select:none;">&dagger;</a></h4>
<p>少なくともこれ書いてる人はプログラミングもC言語もやった事ないです。<br /></p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h4 id="content_1_6">里々より難しいんでしょ？<a class="anchor_super" id="e9d57da4" href="../startup/migrate_from_satori.html#e9d57da4.html" style="user-select:none;">&dagger;</a></h4>
<p>どんなゴーストを作るかによります。<br />
トーク中心のシンプルなゴーストなら里々のほうが楽ですが、複雑な動作をするゴーストの場合むしろ里々のほうがYAYAより難解なSHIORIになることもあります。<br />
特にループや配列を多用しまくる場合、里々だと記述するのが辛くなる可能性が高いです。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h4 id="content_1_7">重いって本当？<a class="anchor_super" id="ca087606" href="../startup/migrate_from_satori.html#ca087606.html" style="user-select:none;">&dagger;</a></h4>
<p>特に重いという話は聞きません。少なくとも里々よりは軽いです。<br />
もしシンプルなYAYA製ゴーストなのに重いと感じたら、「実行ログ出力設定」や「インストール済みゴーストリスト取得の制限なし取得」をオンにしている可能性が高いです。<br />
<br />
参考になるかもしれないサイト。<br /></p>
<ul class="list1 list-indent1"><li><a href="http://nikolat.herokuapp.com/ukagaka/time-file-io/" rel="nofollow">ファイル読み書きはどれくらい遅いのか（追記あり） | すくりや</a>（一番下のまとめ）</li></ul>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h4 id="content_1_8">ファイル操作や正規表現ってYAYAしか使えないの？<a class="anchor_super" id="pc33961c" href="../startup/migrate_from_satori.html#pc33961c.html" style="user-select:none;">&dagger;</a></h4>
<p>他のSHIORIでもSAORIを使えばできます。<br />
例えば、<a href="../YAYA+as+SAORI.html" class="link_page_passage">YAYA as SAORI</a>でYAYAをSAORIとして使うとYAYAと同じようにファイル操作や正規表現ができます。<br />
つまりそれだけを目当てにしてYAYAを選択する必要はありません。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h4 id="content_1_9">里々だと絶対作れないようなゴーストが作れるようになる？<a class="anchor_super" id="t264cef6" href="../startup/migrate_from_satori.html#t264cef6.html" style="user-select:none;">&dagger;</a></h4>
<p>上で書いたように大体の事は里々でもSAORIを使ったり記述を工夫したりする事により実現可能です。<br />
ただし辞書が記述しやすいか、記述がどれだけ長くなるか、記述した辞書が後から見やすいかどうか等の違いは出てきます。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_10">注意点<a class="anchor_super" id="u3ee1de7" href="../startup/migrate_from_satori.html#u3ee1de7.html" style="user-select:none;">&dagger;</a></h3>
<ul class="list1 list-indent1"><li>里々はウェイト、改行、スコープ切り替えタグなどが自動で入りましたが、YAYAはそれらを全て<strong>さくらスクリプトを使い自分で書きます</strong>。選択肢も必ずさくらスクリプトで書くことになります。</li>
<li>YAYAは基本的にトーク以外は半角で書きます。</li>
<li>里々はテンプレートゴーストがなくてもsatori.dllを用意してマニュアルを見ればなんとかなりましたが、YAYAはSHIORI/3.0設定スクリプトなど（ゴーストが動くときの歯車の部分）を自力で0から作るのが難しいためほぼ必須です。最低限SHIORI/3.0設定スクリプト（<a href="../SimpleYAYA%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88.html" class="link_page_passage">SimpleYAYAテンプレート</a>でいうとyaya_shiori3.dic）だけは流用したほうが無難です。</li>
<li>里々は拡張子が「.txt」でファイル名が「dic～」から始まる辞書ファイルは自動的に読み込みましたが、YAYAは<strong>yaya.txtで設定した辞書しか読み込みません</strong>。その代わりどの拡張子の辞書も読み込める、辞書を好きなディレクトリに置けるという利点もあります。</li>
<li>どの辞書にどのイベントを書いてもいいのは里々と同じ。</li>
<li>フォルダごとの辞書読み込み切り替えはできません。（多重人格のやり方は<a href="../Tips/%E5%A4%9A%E9%87%8D%E4%BA%BA%E6%A0%BC%E3%83%A2%E3%83%BC%E3%83%89.html" class="link_page_passage">Tips/多重人格モード</a>にありますが、読み込みフォルダ切り替え方式ではありません）</li>
<li>里々はSAORI-basicをそのまま使えましたが、YAYAではPROXY.DLLというSAORIを経由しないと使えません。里々でsatori_conf.txtに書いたようなsaori定義はいりません。（詳しくは<a href="../Tips/SAORI%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9.html" class="link_page_passage">Tips/SAORIの使い方</a>を）</li></ul>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_11">準備しておいたほうがよいもの<a class="anchor_super" id="qa625c4e" href="../startup/migrate_from_satori.html#qa625c4e.html" style="user-select:none;">&dagger;</a></h3>
<dl class="list1 list-indent1"><dt>テキストエディタ</dt>
<dd>基本的に何でも良いですが、<span class="noexists"><a href="../cmd=edit&amp;page=%E3%82%A8%E3%83%87%E3%82%A3%E3%82%BF%E8%89%B2%E5%88%86%E3%81%91%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB&amp;refer=StartUp%2F%E9%87%8C%E3%80%85%E3%81%8B%E3%82%89%E3%81%AE%E7%A7%BB%E8%A1%8C.html">エディタ色分けファイル</a></span>ページにあるテキストエディタとそれに対応した色分けファイルをダウンロードしておくのをお勧めします。記述がとても見やすいです。拡張子が「.dic」のファイルを開くと自動的に色分けされるよう設定しておくと更に便利。</dd>
<dt>テンプレートゴースト</dt>
<dd><a href="../startup/making_ghosts_with_yaya.html.html" class="link_page_passage">StartUp/Making ghosts with YAYA</a>から自分に合ったものを。前述したようにほぼ必須。</dd></dl>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_12">YAYAの辞書を書いてみる<a class="anchor_super" id="hcfdaf26" href="../startup/migrate_from_satori.html#hcfdaf26.html" style="user-select:none;">&dagger;</a></h2>
<p>以下、「<a href="http://ms.shillest.net/yayame.xhtml" rel="nofollow">はろーYAYAわーるど（紺野ややめ）</a>」や「SimpleYAYAテンプレート」以外のテンプレートでは通用しないかもしれません（特にタイトルに「☆」がついている項目）<br /></p>
<p>起動イベントで例を出してみます。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_13">基本<a class="anchor_super" id="me9643b5" href="../startup/migrate_from_satori.html#me9643b5.html" style="user-select:none;">&dagger;</a></h3>
<ul class="list1 list-indent1"><li>里々
<pre>＊OnBoot
：いっちばーん。</pre></li></ul>
<p>里々ではこう書いていました。<br />
YAYAでは以下のように書きます。</p>
<ul class="list1 list-indent1"><li>YAYA
<pre>OnBoot
{
　&quot;\0\s[0]いっちばーん。\e&quot;
}</pre></li></ul>
<p>なんかよくわからない記号が色々ありますが、一つづつ見ていきましょう。</p>
<ul class="list1 list-indent1"><li>記号の解説</li></ul>
<dl class="list1 list-indent1"><dt><span class="noexists"><a href="../cmd=edit&amp;page=OnBoot&amp;refer=StartUp%2F%E9%87%8C%E3%80%85%E3%81%8B%E3%82%89%E3%81%AE%E7%A7%BB%E8%A1%8C.html">OnBoot</a></span></dt>
<dd>最初に書く起動イベントを表す名前。このへんは里々と同じです。YAYAでは関数名と呼んだりします。<br />
<a href="http://crow.aqrs.jp/reference/all/Shiori/index.html" rel="nofollow">CROW・SSPリファレンス - Shiori</a>に書かれてるイベント名はどれもYAYAでそのまま書けます。<br />
「起動」「終了」「初回」などの日本語のイベント名は里々独自イベント名のため、YAYAで使ってもそのままでは呼び出されません。</dd></dl>
<dl class="list1 list-indent1"><dt>{ }</dt>
<dd>イベント名を書いたのあと、イベントの中身をこの二つの記号でくくります。<br />
<strong>YAYAでSHIORI Eventを書く時は必ず「イベント名{イベントの中身}」</strong>です。<br />
ちゃんと囲まないとエラーが出てゴーストが起動しなくなってしまいます。</dd></dl>
<dl class="list1 list-indent1"><dt>&quot; &quot;</dt>
<dd>トークなど、文字列は必ずこの記号でくくります。<br />
<strong>里々と違い、これでくくってない文字は変数名や関数名だと思われてしまいます</strong>。<br />
ちなみに「&quot; &quot;」の変わりに「' '」でくくると中にある変数が展開されません。普段は「&quot; &quot;」でOK。</dd></dl>
<dl class="list1 list-indent1"><dt>\0</dt>
<dd>「これから0番キャラ（さくら側）がしゃべったり表情変えたりするぞー」という意味のさくらスクリプト。<br />
この後に書いたテキストは0番のキャラのバルーンに表示されます。1番の相方キャラにしゃべらせたくなったら\1。<br />
里々ではこの二つの切り替えを「：」のみでしています。</dd></dl>
<dl class="list1 list-indent1"><dt>\s[0]</dt>
<dd>0番サーフェスを表示するさくらスクリプト。里々で（０）と書いていたもの。<br />
里々では最初の（０）は省略できましたが、YAYAではこれを入れないとトークをする前のサーフェスがそのまま表示されてしまいます。</dd></dl>
<dl class="list1 list-indent1"><dt>\e</dt>
<dd>トークの終了を表すさくらスクリプト。入れなくても特に問題はないようですが一応トークの最後に入れておきましょう。</dd></dl>
<p>ちなみに里々と違い自動でウェイトはつきません。入れたい場合はさくらスクリプトで入れてください。
さくらスクリプトはYAYA以外のSHIORIでも共通して使うものなので、このWikiでは詳しく説明しません。<br />
これ以外も色々あるのでリファレンスサイトで、「実際に使ってみたいもの」を「ちょっとづつだけ」で良いのでYAYAといっしょに覚えてみてください。<br />
（いきなり全部覚えようとすると頭がパンクします…）<br /></p>
<ul class="list1 list-indent1"><li><a href="http://crow.aqrs.jp/reference/crow/SakuraScript/index.html" rel="nofollow">CROWリファレンス - SakuraScript</a><br /></li>
<li><a href="http://disc2.s56.xrea.com/manual/list_sakura_script.htm" rel="nofollow">Disc-2 SakuraScriptリスト</a></li></ul>
<p>最初にイベント名を書く、中身を「{}」でくくるなどの書き方のルールがちゃんと合ってればこんな風に書いても</p>
<pre>OnBoot {
&quot;\0\s[0]いっちばーん。\e&quot;
}</pre>
<p>こんな風に書いちゃっても構いません。</p>
<pre>OnBoot { &quot;\0\s[0]いっちばーん。\e&quot; }</pre>
<p>OnBootと{の間などにある空白・改行は、入れても入れなくても大丈夫。タブをいれてもOK。<br />
自分の見やすい、書きやすい書き方を選んでください。<br /></p>
<pre>OnBoot{&quot;\0\s[0]いっちばーん。\e&quot;}</pre>
<p>基本的に&quot;&quot;の外にある空白やタブ、改行は無視されるので、</p>
<pre>OnBoot
　　{
　  
　　　　　&quot;\0\s[0]いっちばーん。\e&quot;
　
　　　　　　　　　　　}</pre>
<p>こんなんでもよし。<br />
要するに</p>
<pre>【ここ】OnBoot【ここ】{【ここ】&quot;\0\s[0]いっちばーん。\e&quot;【ここ】}【ここ】</pre>
<p>上の【ここ】の所に空白(半角空白、全角空白、タブ)や改行をいくらでも入れられるっていう訳です。<br />
<br />
YAYAはこの仕組みを使って辞書を自由に整える事ができます。<br />
これが里々より辞書の見通しが良いと言われる理由の一つです。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_14">改行する<a class="anchor_super" id="yc594c97" href="../startup/migrate_from_satori.html#yc594c97.html" style="user-select:none;">&dagger;</a></h3>
<ul class="list1 list-indent1"><li>里々
<pre>＊OnBoot
：改行
します。</pre></li></ul>
<p>里々では辞書の中の改行がそのままトークの改行になりましたが、<strong>YAYAではさくらスクリプトを使って改行しないとバルーンに表示された時改行になりません</strong>。<br />
改行したい部分に「\n」をいれてください。</p>
<ul class="list1 list-indent1"><li>YAYA
<pre>OnBoot
{
　&quot;\0\s[0]改行\nします。\e&quot;
}</pre></li></ul>
<p>「これじゃあ辞書の中で改行になってなくてわかりづらい！」…と思う方は</p>
<pre>OnBoot
{
　&quot;\0\s[0]改行\n/
　します。\e&quot;
}</pre>
<p>こうやって行末に「/」を入れれば改行できます。<br />
好きな位置に入れてつかいましょう。</p>
<pre>OnBoot
{
　&quot;\0\s[0]/
　改行\n/
　します。/
　\e&quot;
}</pre>
<ul class="list1 list-indent1"><li>わるい例
<pre>OnBoot
{
　&quot;\0\s[0]改行\n
　します。\e&quot;
}</pre></li></ul>
<p><strong>&quot;　&quot;や'　'でくくってあるところを末尾に「/」を入れないで改行してしまうとエラーになってしまうので気を付けてください</strong>。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_15">単語や文章をランダムで選ぶ<a class="anchor_super" id="i74d4072" href="../startup/migrate_from_satori.html#i74d4072.html" style="user-select:none;">&dagger;</a></h3>
<p>里々では同じイベントをたくさん書くとその中からランダムで選ばれました。</p>
<pre>＊OnBoot
：こんにちはー。

＊OnBoot
：おっすー。

＊OnBoot
：やっほー。</pre>
<p>が、YAYAでこれをやるとエラーが出て起動しなくなります。<br />
<strong>YAYAは同じイベント名のイベントを二つ以上書けません。</strong><br />
<br />
代わりにこんな風に、{　}の中で&quot;　&quot;を改行区切りで並べましょう。</p>
<pre>OnBoot
{
　&quot;\0\s[0]こんにちはー。\e&quot;
　&quot;\0\s[0]おっすー。\e&quot;
　&quot;\0\s[0]やっほー。\e&quot;
}</pre>
<p><strong>YAYAは{　}の中に&quot;　&quot;や'　'でくくった文字列が複数あると、その中のどれか一コだけランダムで選びます</strong>。<br />
<br />
改行の代わりに「;」区切りにすると一行にまとめることもできます。</p>
<pre>OnBoot
{
　&quot;\0\s[0]こんにちはー。\e&quot; ; &quot;\0\s[0]おっすー。\e&quot; ; &quot;\0\s[0]やっほー。\e&quot;
}</pre>
<p><br />
<br />
\0\s[0]や\eを何度も書くのが面倒という人は<br /></p>
<pre>OnBoot
{
　&quot;\0\s[0]&quot;
　--
　&quot;こんにちはー。&quot;
　&quot;おっすー。&quot;
　&quot;やっほー。&quot;
　--
　\e
}</pre>
<p>こう書いてしまう事もできます。<br />
<strong>「--」で区切ると、その区切った中からそれぞれ&quot;　&quot;や'　'でくくった文字列がランダムで1コ選ばれ、くっつけて表示されます</strong>。<br /></p>
<p><br />
ちょっとわかりづらいので例を出して説明。<br /></p>
<pre>てんき
{
　&quot;きょうは&quot;//←&lt;1&gt;この2つのどっちかが選ばれる
　&quot;明日は&quot;//←&lt;2&gt;
　--
　&quot;晴れ&quot;//←(1)この4つの中のどれかが選ばれる
　&quot;雨&quot;//←(2)
　&quot;曇り&quot;//←(3)
　&quot;雷&quot;//←(4)
　--
　&quot;です。&quot;//←1コしかないので必ずコレが選ばれる
}</pre>
<p>こう書くと<br />
「きょうは雨です。」<br />
「明日は曇りです。」<br />
「きょうは晴れです。」<br />
「明日は雷です。」<br />
「明日は晴れです。」<br />
…といった文章が呼び出すたびランダムで作られるわけです。<br />
<br />
ランダムなので同じ単語が連続して選ばれる事もあります。<br />
ここで「あれ？里々みたいに重複回避ってできないの？」と疑問にお思いの方も出てくるかもしれませんが、できます。</p>
<pre>OnBoot : nonoverlap
{
　&quot;\0\s[0]&quot;
　--
　&quot;こんにちはー。&quot;
　&quot;おっすー。&quot;
　&quot;やっほー。&quot;
　--
　\e
}</pre>
<p>イベント名の後ろに「 : nonoverlap」をつけてください。同じ文が連続して選ばれなくなります。<br />
上から順番に選ばせたい時は「 : sequential」です。</p>
<p>ちなみに、里々ではこんな風に書くことにより別な場所に書いてある単語群をトークに呼び出す事ができますが<br /></p>
<pre>＊
：（季節）はいいね～
：どの季節でも言ってるジャン</pre>
<pre>＠季節
春
夏
秋
冬</pre>
<p>同じ事をYAYAでやるとこんな感じです。</p>
<pre>Talk
{
　&quot;\0\s[0]%(季節)はいいね～\w9\1\s[10]どの季節でも言ってるジャン\e&quot;
}

季節
{
　&quot;春&quot;
　&quot;夏&quot;
　&quot;秋&quot;
　&quot;冬&quot;
}</pre>
<p>トーク中で%(季節)または%季節と書くと、「季節」という名前の関数を呼び出すことができます。<br />
<br />
里々だと単語のひとまとまりは「＠季節」、改行が入るような文章は「＊季節」と書くルールがありましたが<br />
<strong>YAYAは単語と文章を区別しないので単語でも文章でも「季節{　}」</strong>です。<br />
OnBootなどのSHIORIイベントも単語群もどちらも「関数」として書くので書き方も全く同じ。<br />
<br />
もちろん上で書いた天気トークみたいに</p>
<pre>Talk
{
　&quot;\0\s[0]&quot;
　--
　&quot;春&quot;
　&quot;夏&quot;
　&quot;秋&quot;
　&quot;冬&quot;
　--
　&quot;はいいね～\w9\1\s[10]どの季節でも言ってるジャン\e&quot;
}</pre>
<p>こう書いてもよいです。<br />
別なトークでも「季節」の単語群を使いたかったら最初に書いた方式の方が良いですね。<br /></p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_16">変数<a class="anchor_super" id="d9cc0463" href="../startup/migrate_from_satori.html#d9cc0463.html" style="user-select:none;">&dagger;</a></h3>
<p>里々でもおなじみ変数。ユーザー名や起動回数・起動時間・好感度で使う人が多かったかも。<br />
里々では1種類の変数しかありませんでしたが、YAYAはいろいろとあります。<br />
まずはそのへんの説明。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h4 id="content_1_17">文字列と数値<a class="anchor_super" id="v9f96732" href="../startup/migrate_from_satori.html#v9f96732.html" style="user-select:none;">&dagger;</a></h4>
<p>YAYAの変数は文字列と数値の二種類があります。（正確には整数、実数、文字列の3種類）<br /></p>
<pre>変数 = 1</pre>
<p>こう代入すると変数の中身は数値の「1」</p>
<pre>変数 = &quot;1&quot;</pre>
<p>こうやって&quot;　&quot;か'　'でくくって代入すると変数の中身は文字列の「1」となります。<br />
<br />
里々と違い全角の「１」「２」「３」…は数値になることはできません。文字列扱いです。<br />
<strong>文字列変数だと数値として比較や計算ができません。</strong><br />
例えば数字の数値「1」と「2」で足し算すると結果は「3」になりますが、文字列の「1」と「2」を足すと1と2がくっついて「12」になってしまいます。<br />
他にも色々違いがありますので注意してください。<br />
<br />
ちなみに変数はいつでも好きな時に文字列←→数値に変更できるので安心。<br />
用途によって変更してください。</p>
<ul class="list1 list-indent1"><li>変数を文字列変数にする
<pre>変数 = TOSTR(変数)</pre></li></ul>
<ul class="list1 list-indent1"><li>変数を数値変数にする
<pre>変数 = TOINT(変数)</pre></li></ul>
<p>自動的に整数、実数、文字列どれなのか判断して変換してくれる<span class="noexists"><a href="../cmd=edit&amp;page=TOAUTO&amp;refer=StartUp%2F%E9%87%8C%E3%80%85%E3%81%8B%E3%82%89%E3%81%AE%E7%A7%BB%E8%A1%8C.html">TOAUTO</a></span>なんてのもあります。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h4 id="content_1_18">グローバルとローカルの違い<a class="anchor_super" id="gd41ca5e" href="../startup/migrate_from_satori.html#gd41ca5e.html" style="user-select:none;">&dagger;</a></h4>
<pre>_変数名</pre>
<p>名前の頭に「_」をつけるとローカル変数</p>
<pre>変数名</pre>
<p>つけないとグローバル変数になります。<br />
<br />
おおざっぱに言うと「一時的に使うものですぐ消えてしまう」のがローカル変数、「削除しない限りずっと残る」のがグローバル変数です。<br />
里々の変数は全部グローバル変数ですね。<br />
YAYAではユーザー名や好感度などずっと残しておかないといけない変数以外はローカル変数を使うのをお勧めします。<br />
<br />
で、ローカル変数がどれぐらいの期間使えるのかというと、<br />
「現在の{ }内、およびそれより深い入れ子階層のみで使用できる。寿命は該当する{ }を抜けるところまで。」<br />
です。（マニュアルより引用）<br />
<br />
言葉では説明しづらいので一例をだしてみると</p>
<pre>ローカル変数テスト {
　　{
　　_変数 = 1
　　}
結果 = _変数
}</pre>
<p>こう書くと「_変数」が深い階層から浅い階層に移った時に消えてしまうので「結果」の中身も空になってしまいますが</p>
<pre>ローカル変数テスト {
_変数 = &quot;&quot;
　　{
　　_変数 = 1
　　}
結果 = _変数
}</pre>
<p>こうすれば「_変数」は浅い階層→深い階層→浅い階層…と、最初に浅い階層にいた経験があるので深い階層から浅い階層に移動しても消えずに残り、「結果」の中身は1です。<br />
最初に「_変数」が生まれたところが「結果=_変数」と同じ（またはもっと浅い）階層かどうかがポイント。
<br />
つまりローカル変数を長生きさせたい時は最初に一番浅い階層で「_○○=&quot;&quot;」などの一行を書いておけばOK。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h4 id="content_1_19">変数の代入<a class="anchor_super" id="a87ba410" href="../startup/migrate_from_satori.html#a87ba410.html" style="user-select:none;">&dagger;</a></h4>
<p>プレゼントをあげてフラグを立てた例。<br />
プレゼントフラグを数値の1にします。</p>
<ul class="list1 list-indent1"><li>里々
<pre>＊プレゼントした
＄プレゼントフラグ＝１
：わーいありがとう！</pre></li></ul>
<ul class="list1 list-indent1"><li>YAYA
<pre>プレゼントした
{
プレゼントフラグ = 1

　&quot;\0\s[0]わーいありがとう！\e&quot;
}</pre></li></ul>
<p>里々との違いは<br /></p>
<ul class="list1 list-indent1"><li>頭に「＄」はつけない。</li>
<li>トークや計算などは全部{　}の中に書く（{　}の外に書くとエラーになります）</li>
<li>「＝」などの計算用の記号、「１」などの数値は全て<strong>半角で書く</strong>。
里々でも計算式や数値を半角で書く癖があった人は楽かもしれません。<br />
<br />
<pre>【ここ】プレゼントフラグ【ここ】=【ここ】1【ここ】</pre></li></ul>
<p>【ここ】の部分には空白やタブを入れても構いません。<br />
見やすくするため演算記号の右と左に半角空白を入れる人が多いようです。<br />
<br />
文字列を代入する場合はこんなかんじ。<br />
「プレゼント」という変数に「花束」という文字を入れます。<br /></p>
<ul class="list1 list-indent1"><li>里々
<pre>＊プレゼントした
＄プレゼント【タブ】花束
：わーいありがとう！</pre></li></ul>
<ul class="list1 list-indent1"><li>YAYA
<pre>プレゼントした
{
プレゼント = &quot;花束&quot;

　&quot;\0\s[0]わーいありがとう！\e&quot;
}</pre></li></ul>
<p>数値じゃない時は必ず&quot;　&quot;か'　'でくくりましょう。<br />
トークを書くときと同じですね。
里々みたいに「プレゼント【タブ】&quot;花束&quot;」とは書けません。必ず「=」で代入します。</p>
<pre>プレゼントした
{
プレゼント = 花束

　&quot;\0\s[0]わーいありがとう！\e&quot;
}</pre>
<p>うっかりこう書いてしまうと「プレゼント」の中身はからっぽになってしまいます。<br />
なぜかというと、<strong>YAYAでは「&quot;花束&quot;」ではなく「花束」だけだと「『花束』という名前の変数」になってしまうからです</strong>。<br />
そのため「『プレゼント』という変数に『花束』という変数の中身を入れましたよ～」、という意味に誤解され、<br />
「花束」という変数は存在してないため中身は空っぽになってしまう、という訳です。<br />
<br />
里々でいうとこんな風に書いちゃった、ということです。</p>
<pre>＊プレゼントした
＄プレゼント【タブ】（花束）
：わーいありがとう！</pre>
<p>このへん里々とは逆なので最初はちょっと混乱するかも。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h4 id="content_1_20">変数の計算<a class="anchor_super" id="a61ce42f" href="../startup/migrate_from_satori.html#a61ce42f.html" style="user-select:none;">&dagger;</a></h4>
<ul class="list1 list-indent1"><li>里々
<pre>＊好感度アップ
＄好感度＝（好感度）＋１
：ユーザーさんだいすき！</pre></li></ul>
<ul class="list1 list-indent1"><li>YAYA
<pre>プレゼントした
{
好感度=好感度+1

　&quot;\0\s[0]ユーザーさんだいすき！\e&quot;
}</pre></li></ul>
<p>こっちもシンプル。<br />
里々だと「好感度＝（好感度）＋１」のように右側の変数は（）つきで書く必要がありましたが、YAYAは何もつけなくてOK。<br />
これは前述したように&quot;　&quot;や'　'でくくってない文字列は変数、関数名（半角数字だけの場合は数値）として見られるからです。<br />
<br />
ちなみにYAYAはこう省略して書く事もできます。</p>
<pre>プレゼントした
{
好感度++

　&quot;\0\s[0]ユーザーさんだいすき！\e&quot;
}</pre>
<p>「好感度++」は「好感度を1増やしますよ」という意味で「好感度=好感度+1」と意味は同じです。<br />
「好感度--（半角マイナス2コ）」だと1減ります。<br />
「好感度+=2」だと「好感度=好感度+2」と同じ、「好感度-=2」は「好感度=好感度-2」と同じです。<br />
そのほかYAYAで使える計算用の記号の説明はこのあたりに書いてあります。（専門用語多くてちょっとわかりにくいですが）<br /></p>
<ul class="list1 list-indent1"><li><a href="http://emily.shillest.net/ayaya/index.php?old%2FAYA%2F%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%2FV5%2Fmanual#v84b1e7f" rel="nofollow">old/AYA/ドキュメント/V5/マニュアル</a></li></ul>
<p>里々と同じく、文字同士の足し算もできます。</p>
<pre>プレゼント = &quot;花&quot; + &quot;束&quot;</pre>
<p>と書くと変数「プレゼント」の中身は「&quot;花束&quot;」となります。<br />
<br />
変数はもちろんトーク中でも使えます。</p>
<pre>プレゼントした
{
プレゼント=&quot;花束&quot;

　&quot;\0\s[0]わーい\w6%(プレゼント)だー！\w9\w9ありがとう！\e&quot;
}</pre>
<p>バルーンに「わーい花束だー！ありがとう！」と表示されます。<br />
書き方は上で説明した単語群をトークに使う時と全く同じですね。<br />
このあたりは里々もYAYAも変わりません。<br />
<br />
変数がちゃんと保存されているかどうか確認したい時はゴーストを終了してセーブデータファイル（yaya_variable.cfg）をテキストエディタで開いてみてください。<br />
上の例だったら<br /></p>
<pre>プレゼント,&quot;花束&quot;,,</pre>
<p>という一行があれば、保存成功です！<br />
ちなみに数値型の変数の場合は<br /></p>
<pre>プレゼント,1,,</pre>
<p>こんな風に変数の中身の数字が&quot;　&quot;で囲まれてません。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_21">分岐<a class="anchor_super" id="xbdc6578" href="../startup/migrate_from_satori.html#xbdc6578.html" style="user-select:none;">&dagger;</a></h3>
<p>つつかれ反応での例。<br />
OnMouseDoubleClickイベントは、0番キャラ（さくら側）がつつかれるとReference3の中に「0」が入るという仕様。<br />
そんな訳でReference3に0が入ってるのを確認したら「0番つつかれ反応」に飛ばす辞書を書いてみますね。</p>
<ul class="list1 list-indent1"><li>里々
<pre>＊OnMouseDoubleClick
＞0番さんがつつかれた【タブ】（R3）＝＝０

＊0番さんがつつかれた
：（７）つつくなっ！
</pre></li>
<li>YAYA
<pre>OnMouseDoubleClick {
	if reference[3] == 0 {
	 	0番さんがつつかれた
 	}	
}

 0番さんがつつかれた {
	&quot;\0\s[7]つつくなっ！\e&quot;
}</pre></li></ul>
<p>ここで新登場な「if」。<br />
「if」はその後にある条件式（ここでは「reference[3] == 0」）が正しければ次の「{　}」の中身を実行するよ～、という意味。</p>
<pre> OnMouseDoubleClick {
	if reference[3] == 0 {
	 	&quot;\0\s[7]つつくなっ！\e&quot;
 	}	
}</pre>
<p>もちろんこれもこんな風に「{ }」の中に直接トークを書くことも可能。<br />
必要に応じて記述法を変えてください。<br />
<br />
「if」とあわせて「else」を使うとこんなこともできます。<br /></p>
<pre> OnMouseDoubleClick {
	if reference[3] == 0 {
	 	&quot;\0\s[7]つつくなっ！\e&quot;
 	}
 	else {
	 	&quot;\0\s[7]あたし以外の子もつつくなっ！\e&quot;
 	}
}</pre>
<p>「if 条件式 {　}」にひっかからなかったらその次にある「else {　}」の中身を実行。<br />
この例だと0番以外のキャラがつつかれたら全部「else {　}」の中身を実行。<br />
「else」は「if」の後専用で、「else」単体で書いてもエラーになるので注意。<br />
<br />
0番キャラの「頭が」つつかれた時だけトークさせたい！って時はこう。<br /></p>
<pre> OnMouseDoubleClick {
	if reference[3] == 0 &amp;&amp; reference[3] == &quot;Head&quot; {
	 	&quot;\0\s[7]頭を叩くなっ！\e&quot;
 	}	
}</pre>
<p>二つ以上条件式を並べられます。<br />
半角か全角かの違いだけで、「==」と「&amp;&amp;」の記号の使い方は里々と全く同じですね。<br />
「if」と「reference[3] == 0」の間に空白かタブを入れるのを忘れずに。<br />
<br />
ん？あれ？<br />
でも里々でつつき反応って…<br /></p>
<pre>＊0Headつつかれ
 ：（７）頭を叩くなっ！

＊1つつかれ
やめれ！</pre>
<p>こうやって書いてたよね？<br />
YAYAじゃ似たようなことできんの？？<br />
<br />
…と、言うあなたのためにこちらの記述法。<br /></p>
<pre>OnMouseDoubleClick {
	EVAL( &quot;%(reference[3])%(reference[4])つつかれ&quot; )
}

0Headつつかれ {
	&quot;\0\s[7]頭を叩くなっ！\e&quot;
}

1つつかれ {
	&quot;\1\s[10]やめれ！\e&quot;
}</pre>
<p>普通なら &quot;%(reference[3])%(reference[4])つつかれ&quot;　だけ書くと、0番の頭がつつかれた時「0Headつつかれ」としゃべるゴーストのトークになります。<br />
それを「EVAL (　)」で包み込むと、なんと！「0Headつつかれ」が関数名になっちゃいます！<br />
<br />
このEVALはこういった「いきなり独立した関数を書ける分岐」以外でも色んな場面で役立つ便利な関数です。<br />
詳しくは<a href="../manual/function/EVAL.html" class="link_page_passage">Manual/Function/EVAL</a>のページをどうぞ。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_22">Ｒ０とかＳ０とかＡ０のYAYAでの書き方<a class="anchor_super" id="rd2a3a4b" href="../startup/migrate_from_satori.html#rd2a3a4b.html" style="user-select:none;">&dagger;</a></h3>
<p>全て半角です。<br /></p>
<ul class="list1 list-indent1"><li>里々
<pre>Ｒ０ Ｒ１ Ｒ２ ...</pre></li></ul>
<ul class="list1 list-indent1"><li>YAYA
<pre>reference[0] reference[1] reference[2] ...</pre></li></ul>
<p>古いテンプレートではreference0 reference1 reference2 ..~でした。
（新しいテンプレートでも設定次第でこう書けます）</p>
<ul class="list1 list-indent1"><li>里々
<pre>Ｓ０ Ｓ１ Ｓ２ ...</pre></li></ul>
<ul class="list1 list-indent1"><li>YAYA
<pre>valueex0 valueex1 valueex2 ...</pre></li></ul>
<p>SAORIの使い方はこのページの「SAORI」項目を参照。</p>
<ul class="list1 list-indent1"><li>里々
<pre>Ａ０ Ａ１ Ａ２ ...</pre></li></ul>
<ul class="list1 list-indent1"><li>YAYA
<pre>_argv[0] _argv[1] _argv[2] ...</pre></li></ul>
<p>頭に「_」が付いてるのでわかる通り、ローカル変数です。<br /></p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_23">ssuみたいなこと<a class="anchor_super" id="fca00fd6" href="../startup/migrate_from_satori.html#fca00fd6.html" style="user-select:none;">&dagger;</a></h3>
<p>「条件分岐」「比較」と「計算」はまた違った方法でやりますが、<br />
それ以外はほぼYAYAのシステム関数で同じ事ができます。<br /></p>
<p>
<span class="noexists"><a href="../cmd=edit&amp;page=%E9%96%A2%E6%95%B0%E7%94%A8%E9%80%94%E5%88%A5%E4%B8%80%E8%A6%A7&amp;refer=StartUp%2F%E9%87%8C%E3%80%85%E3%81%8B%E3%82%89%E3%81%AE%E7%A7%BB%E8%A1%8C.html">関数用途別一覧</a></span>を覗いてみてください。<br />
「これじゃ使いたいの見つけにくい！」って人には<a href="http://navy.nm.land.to/post/y_sysfn.html" rel="nofollow">YAYAシステム関数リファレンス</a>なんかもあります。<br /></p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_24">SAORI<a class="anchor_super" id="vd442bfc" href="../startup/migrate_from_satori.html#vd442bfc.html" style="user-select:none;">&dagger;</a></h3>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h4 id="content_1_25">つかいかた<a class="anchor_super" id="maff9ab3" href="../startup/migrate_from_satori.html#maff9ab3.html" style="user-select:none;">&dagger;</a></h4>
<ul class="list1 list-indent1"><li>里々
<pre>（mciaudio,load,鳥の詩.mp3）（mciaudio,play）</pre></li></ul>
<ul class="list1 list-indent1"><li>YAYA
<pre>FUNCTIONEX( 'mciaudio.dll' , 'load' , '鳥の詩.mp3' )
FUNCTIONEX( 'mciaudio.dll' , 'play' )</pre></li></ul>
<p>里々みたいに使うSAORIを事前に設定しておく必要はありません。<br />
直接yaya.dllから見たSAORIの相対パスを指定します。<br />
<br />
ちなみに「mciaudio.dll」と「鳥の詩.mp3」が「yaya.dll」と同じディレクトリにあるのではなく、そのひとつ下の「saori」ディレクトリにある場合</p>
<pre>FUNCTIONEX( 'saori\mciaudio.dll' , 'load' , '鳥の詩.mp3' )</pre>
<p>こう書きます。<br /></p>
<pre>SAORI( 'mciaudio.dll' , 'load' , '鳥の詩.mp3' )
SAORI( 'mciaudio.dll' , 'play' )</pre>
<p>「FUNCTIONEX」ではなく「SAORI」でもOK。<br />
どっちで書いても構わないのなら「FUNCTIONEX」で書きましょう。<br />
<br /></p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h4 id="content_1_26">返り値 Result<a class="anchor_super" id="oab51c89" href="../startup/migrate_from_satori.html#oab51c89.html" style="user-select:none;">&dagger;</a></h4>
<p>SAORI実行関数を使うとそのまま返ってきます。<br />
返り値をバルーンにそのまま表示するのならこうやってトーク中に埋めこんで使ってもいいですし<br />
（ただしSAORI実行関数の引数を&quot;　&quot;ではなく'　'で囲まなければいけないので注意。&quot;　&quot;の中に&quot;　&quot;は書けないからです）</p>
<pre>&quot;\0\s[0]クリップボードにある文字を取り出します。\n「%(FUNCTIONEX( 'saori\textcopy.dll' , 'コピーする文字' ))」\e&quot;</pre>
<p>一旦変数に保存して使ってもよいです。<br /></p>
<pre>変数 = FUNCTIONEX( 'saori\textpaste.dll' )
</pre>
<p>Resultがそのままバルーンに表示されると困る時も適当なローカル変数に代入しておきます。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h4 id="content_1_27">返り値 Value[n]<a class="anchor_super" id="h55dd7e3" href="../startup/migrate_from_satori.html#h55dd7e3.html" style="user-select:none;">&dagger;</a></h4>
<p>上でも書きましたが里々で「Ｓ０ Ｓ１ Ｓ２ ..」と書いていたものは「valueex0 valueex1 valueex2 ...」と書きます。</p>
<p>詳しくはこのページを見てください。</p>
<ul class="list1 list-indent1"><li><a href="../Tips/%E9%9F%B3%E3%82%92%E9%B3%B4%E3%82%89%E3%81%99.html" class="link_page_passage">Tips/音を鳴らす</a></li>
<li><a href="../Tips/SAORI%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9.html" class="link_page_passage">Tips/SAORIの使い方</a></li></ul>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_28">☆現在時刻を表示<a class="anchor_super" id="k1ed6212" href="../startup/migrate_from_satori.html#k1ed6212.html" style="user-select:none;">&dagger;</a></h3>
<p><a href="http://emily.shillest.net/ayaya/index.php?system_dictionary%2Fyaya_shiori3.dic#ta7752a4" rel="nofollow">システム辞書/yaya_shiori3.dic - 時刻系関数</a>を参照。<br />
メモリ量、センダーヘッダの変数もここで見れます。</p>
<pre>時間をおしえる
{
　&quot;\0\s[0]ただいま%(hour)時%(minute)分%(second)秒で～す。\e&quot;
}</pre>
<p>「里々みたいに日本語で書けないとやだー」って人はテンプレートを参考にして自分で書いてしまうのもアリです。</p>
<pre>年　{ GETTIME[0] }
月　{ GETTIME[1] }
日　{ GETTIME[2] }
分　{ GETTIME[5] }
秒　{ GETTIME[6] }

時間をおしえる
{
　&quot;\0\s[0]ただいま%(時)時%(分)分%(秒)秒で～す。\e&quot;
}</pre>
<p>曜日を漢字表記にする方法はこちら。（SimpleYAYAテンプレートには掲載済み）</p>
<ul class="list1 list-indent1"><li><a href="../Tips/%E6%9B%9C%E6%97%A5%E3%82%92%E5%88%A4%E5%88%A5.html" class="link_page_passage">Tips/曜日を判別</a></li></ul>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_29">☆タイマー （＄○○タイマ【タブ】秒数）<a class="anchor_super" id="l9a16687" href="../startup/migrate_from_satori.html#l9a16687.html" style="user-select:none;">&dagger;</a></h3>
<ul class="list1 list-indent1"><li><a href="../Tips/%E6%8C%87%E5%AE%9A%E7%A7%92%E6%95%B0%E7%B5%8C%E9%81%8E%E5%BE%8C%E3%81%AB%E3%82%A4%E3%83%99%E3%83%B3%E3%83%88%E3%82%92%E5%AE%9F%E8%A1%8C.html" class="link_page_passage">Tips/指定秒数経過後にイベントを実行</a></li></ul>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_30">replace.txt<a class="anchor_super" id="g29dd3e7" href="../startup/migrate_from_satori.html#g29dd3e7.html" style="user-select:none;">&dagger;</a></h3>
<p>#defineで同じ事が出来ますが、SHIORIで計算等が実行される前の「辞書に書かれてる文字列そのまま全部」を変換してしまう強力なものなので、重要な文字列まで変換してしまう等の失敗をしないよう注意。<br />
詳しい使い方は<a href="../%E9%96%A2%E6%95%B0%E3%83%BB%E5%A4%89%E6%95%B0%E3%83%BB%E3%81%95%E3%81%8F%E3%82%89%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%82%92%E7%9F%AD%E7%B8%AE%E3%81%97%E3%81%A6%E6%9B%B8%E3%81%8F.html" class="link_page_passage">関数・変数・さくらスクリプトを短縮して書く</a>ページを参照。<br />
<br />
例えばこんな記述をしておくと、</p>
<pre>#define @r reference</pre>
<p>今まで「reference[0]」と書いてた所を「@r[0]」と短縮して書けるように。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_31">☆replace_after.txt<a class="anchor_super" id="s674ca8a" href="../startup/migrate_from_satori.html#s674ca8a.html" style="user-select:none;">&dagger;</a></h3>
<p>OnTranslateかOnTranslateInternalイベントでできます。<br />
自動ウェイトなどに使うのならOnTranslateInternalの方をおすすめ。<br />
（OnTranslateだと、例えばヘッドラインの中身まで変換されてしまいます）<br />
<br />
トークに自動でウェイトをつける例</p>
<pre>OnTranslateInternal
{
	_text = _argv[0]
	_text = REPLACE(_text, &quot;…&quot;, &quot;…\w3&quot;)
	_text = REPLACE(_text, &quot;、&quot;, &quot;、\w5&quot;)
	_text = REPLACE(_text, &quot;。&quot;, &quot;。\w9&quot;)
	_text
}</pre>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_32">シェルの見切れ・重なり反応をつける<a class="anchor_super" id="v1534609" href="../startup/migrate_from_satori.html#v1534609.html" style="user-select:none;">&dagger;</a></h3>
<ul class="list1 list-indent1"><li><a href="../Tips/%E8%A6%8B%E5%88%87%E3%82%8C%E3%83%BB%E9%87%8D%E3%81%AA%E3%82%8A%E5%8F%8D%E5%BF%9C%E3%82%92%E9%87%8C%E3%80%85%E9%A2%A8%E3%81%AB.html" class="link_page_passage">Tips/見切れ・重なり反応を里々風に</a></li></ul>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_33">Φのように危険な記号を無効化する<a class="anchor_super" id="ta5d62ba" href="../startup/migrate_from_satori.html#ta5d62ba.html" style="user-select:none;">&dagger;</a></h3>
<p>里々と同様、YAYAでもそのままトークに書けない記号があります。<br />
里々では記号の前に「Φ」を入れて無効化してました。<br />
YAYAではCHRという関数を使って書きます。</p>
<ul class="list1 list-indent1"><li><a href="http://www.psl.ne.jp/perl/pdojo00b.html" rel="nofollow">[psl]ASCIIコード一覧表</a></li>
<li><a href="http://winofsql.jp/VA003334/CprogBase040109013756.htm" rel="nofollow">キャラクタコード表</a></li></ul>
<p>こういったサイトを参考にし、書きたい記号の上位3ビット（上のサイトでいうと横の軸にある記号）と上位4ビット（縦の軸）を調べ<br /></p>
<pre>CHR(0x(上位3ビット)(上位4ビット))</pre>
<p>と書きます。</p>
<p>例えば「1」でしたら</p>
<pre>CHR(0x31)</pre>
<p>です。<br />
必ず半角で書きます。</p>
<ul class="list1 list-indent1"><li>「&quot;　&quot;」の中に「&quot;」を書くサンプル</li></ul>
<pre>記号表示テスト
{
	&quot;\0\s[0]記号「%(CHR(0x22))」をバルーンに表示\e&quot;
}</pre>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_34">コメントアウト<a class="anchor_super" id="ncce31d5" href="../startup/migrate_from_satori.html#ncce31d5.html" style="user-select:none;">&dagger;</a></h3>
<p>＃を//にするだけです。</p>
<ul class="list1 list-indent1"><li>里々
<pre>＃ 起動イベント
＊OnBoot
：こんにちはー。</pre></li></ul>
<ul class="list1 list-indent1"><li>YAYA
<pre>// 起動イベント
OnBoot
{
　&quot;\0\s[0]こんにちはー。\e&quot;
}</pre></li></ul>
<p>こんな位置にも入れられます。<br />
つまり「//」がついた所から右の部分が全てコメントアウトになります。
　</p>
<pre>OnBoot
{
　&quot;\0\s[0]こんにちはー。\e&quot;// 起動トーク
}</pre>
<p>「/*」と「*/」でくくってもコメントアウトになります。<br />
複数行ごとくくれるので行数が多いならこっちの方が楽。どこからどこまでコメントアウトかちょっとわかりづらいのが難点？</p>
<pre>/*
起動イベント
一番最初に起動した時呼ばれる
*/
OnBoot
{
　&quot;\0\s[0]こんにちはー。\e&quot;
}</pre>
<p>YAYAは里々より注釈が入れやすく、気軽に使いやすいです。<br />
後で見返した時どこが何なのかすぐ思い返せるようばんばん入れておきましょう。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_35">里々からYAYAに移行した人にありがちな疑問<a class="anchor_super" id="dbf6357e" href="../startup/migrate_from_satori.html#dbf6357e.html" style="user-select:none;">&dagger;</a></h2>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_36">ゴーストを起動しても全く動かない！<a class="anchor_super" id="p4111ec3" href="../startup/migrate_from_satori.html#p4111ec3.html" style="user-select:none;">&dagger;</a></h3>
<p>YAYAでは里々と違って辞書の記述方式が一文字でも間違っているとゴーストが動作しなくなります。どこの記述が間違っていたのか確認しましょう。<br /></p>
<ul class="list1 list-indent1"><li>Tips/玉を使った辞書エラーチェック
<br />
<br />
もしくは実行ログを見ても確認できます。<br />
yaya.dllと同じ階層にあるyaya.txtに「log, ayame.log」の一行を追加してからゴーストを起動し、出力された「ayame.log」をテキストエディタで開いてみてください。</li></ul>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_37">satori_savedata.txt（セーブデータ）どこー？<a class="anchor_super" id="w9ffd6bb" href="../startup/migrate_from_satori.html#w9ffd6bb.html" style="user-select:none;">&dagger;</a></h3>
<p>グローバル変数は「yaya_variable.cfg」に保存されています。<br />
（テンプレートによってファイル名が違うこともあります）</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_38">エイリアスエラーが出たけどこれって何？<a class="anchor_super" id="t2e56fb4" href="../startup/migrate_from_satori.html#t2e56fb4.html" style="user-select:none;">&dagger;</a></h3>
<p>descript.txtがshiori,satori.dllのままではないでしょうか。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_39">そのほか<a class="anchor_super" id="va63791e" href="../startup/migrate_from_satori.html#va63791e.html" style="user-select:none;">&dagger;</a></h3>
<p><a href="../%E5%9B%B0%E3%81%A3%E3%81%9F%E3%81%A8%E3%81%8D%E3%81%AE%E5%AF%BE%E5%87%A6%E6%B3%95.html" class="link_page_passage">困ったときの対処法</a>も見ましょう。</p>
   
   	 	
	</div>
</div>




<table cellspacing=0 width=100%>
<tr><td id=footer>


<div id="lastmodified">
 Last modified on: 2014-01-08 (Wednesday) 18:54:43<span class="page_passage"></span></div>


<div id="related">
 Related pages: <a href="../YAYA+as+SAORI.html">YAYA as SAORI</a><span class="page_passage"></span>
 <a href="../MenuBar.html">MenuBar</a><span class="page_passage"></span>
 <a href="../manual/function/EVAL.html">Manual/Function/EVAL</a><span class="page_passage"></span>
 <a href="../startup/making_ghosts_with_yaya.html.html">StartUp/Making ghosts with YAYA</a><span class="page_passage"></span>
 <a href="../SimpleYAYA%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88.html">SimpleYAYAテンプレート</a><span class="page_passage"></span>
 <a href="../Tips/%E8%A6%8B%E5%88%87%E3%82%8C%E3%83%BB%E9%87%8D%E3%81%AA%E3%82%8A%E5%8F%8D%E5%BF%9C%E3%82%92%E9%87%8C%E3%80%85%E9%A2%A8%E3%81%AB.html">Tips/見切れ・重なり反応を里々風に</a><span class="page_passage"></span>
 <a href="../Tips/%E6%9B%9C%E6%97%A5%E3%82%92%E5%88%A4%E5%88%A5.html">Tips/曜日を判別</a><span class="page_passage"></span>
 <a href="../Tips/SAORI%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9.html">Tips/SAORIの使い方</a><span class="page_passage"></span>
 <a href="../%E5%9B%B0%E3%81%A3%E3%81%9F%E3%81%A8%E3%81%8D%E3%81%AE%E5%AF%BE%E5%87%A6%E6%B3%95.html">困ったときの対処法</a><span class="page_passage"></span>
 <a href="../Tips/%E6%8C%87%E5%AE%9A%E7%A7%92%E6%95%B0%E7%B5%8C%E9%81%8E%E5%BE%8C%E3%81%AB%E3%82%A4%E3%83%99%E3%83%B3%E3%83%88%E3%82%92%E5%AE%9F%E8%A1%8C.html">Tips/指定秒数経過後にイベントを実行</a><span class="page_passage"></span>
 <a href="../%E9%96%A2%E6%95%B0%E3%83%BB%E5%A4%89%E6%95%B0%E3%83%BB%E3%81%95%E3%81%8F%E3%82%89%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%82%92%E7%9F%AD%E7%B8%AE%E3%81%97%E3%81%A6%E6%9B%B8%E3%81%8F.html">関数・変数・さくらスクリプトを短縮して書く</a><span class="page_passage"></span>
 <a href="../Tips/%E5%A4%9A%E9%87%8D%E4%BA%BA%E6%A0%BC%E3%83%A2%E3%83%BC%E3%83%89.html">Tips/多重人格モード</a><span class="page_passage"></span>
 <a href="../Tips/%E9%9F%B3%E3%82%92%E9%B3%B4%E3%82%89%E3%81%99.html">Tips/音を鳴らす</a><span class="page_passage"></span></div>


</td></tr>
</table>

<div id="interface_footer"></div>

<script src="../interface.js"></script>

</body>
</html>
