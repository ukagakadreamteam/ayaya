
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">


<head profile="http://purl.org/net/ns/metaprof">
 <meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8" />
 <meta http-equiv="content-style-type" content="text/css" />

 <title>困ったときの対処法 - AYAYA/03</title>
 <link rel="stylesheet" href="style.css" type="text/css" media="screen" charset="UTF-8" />
 <!--<link rel="stylesheet" href="skin/default.css" type="text/css" media="screen" charset="UTF-8" />-->
 <!--<link rel="stylesheet" href="skin/print.css" type="text/css" media="print" charset="UTF-8" />-->
 <!--<link rel="stylesheet" href="/svgd/table.css" type="text/css" />-->
 <!--<link rel="alternate" type="application/rss+xml" title="RSS" href="cmd=mixirss&amp;ver=0.91" />--> 
 <script type="text/javascript">
 <!--
 // -->
 IMAGE_DIR = 'image/';
 SKIN_DIR = 'skin/';
 </script>
<!-- <script type="text/javascript" src="skin/lang/.js"></script> -->
<!--<script type="text/javascript" src="skin/default.js"></script>-->
<!-- <script type="text/javascript" src="skin/ajax/textloader.js"></script> -->
<!-- <script type="text/javascript" src="skin/ajax/glossary.js"></script> -->
 <!--<script type="text/javascript" src="skin/tzCalculation_LocalTimeZone.js"></script>-->
</head>

<body>
<p id="original_doc_link">https://emily.shillest.net/ayaya/index.php?困ったときの対処法</p>

<div id="interface_header"></div>

<div id="interface_content">
   <div id="body"><h2 id="content_1_0">Troubleshooting<a class="anchor_super" id="kbcfaf73" href="#kbcfaf73" style="user-select:none;">&dagger;</a></h2>
<div class="contents">
<a id="contents_1"></a>
<ul class="list1 list-indent1"><li><a href="#kbcfaf73">Troubleshooting</a>
<ul class="list2 list-indent1"><li><a href="#hb818e09">動作が重い</a></li>
<li><a href="#o1fb9b28">選択肢が選べたり選べなかったりする</a></li>
<li><a href="#od2a648b">選択肢を選んでも「1」としか喋らなくなった。</a></li>
<li><a href="#c1c2cca9">トークに謎の「0」や「1」が混じってる</a></li>
<li><a href="#h4d589f1">ランダムトークをしなくなってしまった</a></li>
<li><a href="#j321cb96">うまく起動しない</a></li>
<li><a href="#ab032f7a">辞書中の特定の関数全てに「引数の型が不正です」エラー</a></li>
<li><a href="#e322a960">SAORI実行時にフリーズする</a></li>
<li><a href="#bce1ca9e">SakuraScriptの[]の中に「]」を記述したい。</a></li>
<li><a href="#s818c304">ゴースト配布時、どのファイルを消せばいいのかわからない</a></li></ul></li></ul>
</div>

<p>開発関連の質問は伺か開発フォーラム<a href="http://ghost.sakura.tv/fluxbb/viewforum.php?id=4" rel="nofollow">http://ghost.sakura.tv/fluxbb/viewforum.php?id=4</a>
で行っています</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_1">動作が重い<a class="anchor_super" id="hb818e09" href="#hb818e09" style="user-select:none;">&dagger;</a></h3>
<p>動作ログを取る設定のままにしていませんか？<br />
文の設定ファイルaya.txtをもう一回見直してみてください。<br /></p>
<p>もしくは「***_shiori3.dic」内で「インストール済みゴーストリストを取得する」に設定していませんか？<br />
取得する最大数を減らしてみてください。ゴーストリストを一切使用しないのなら0でも問題ありません。<br /></p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_2">選択肢が選べたり選べなかったりする<a class="anchor_super" id="o1fb9b28" href="#o1fb9b28" style="user-select:none;">&dagger;</a></h3>
<p>どこかで{}の閉じ忘れをしているかもしれません。<br /></p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_3">選択肢を選んでも「1」としか喋らなくなった。<a class="anchor_super" id="od2a648b" href="#od2a648b" style="user-select:none;">&dagger;</a></h3>
<p>文Ver5.0～Ver5.2以前の場合、OnChoiceSelectで指定した関数の中に、以下の文字が入っているかもしれません。</p>
<pre>(　)　[　]　!　++　--　*　/　%　+　-　&amp;　==　!=　&lt;=　&gt;=　&lt;　&gt;　_in_　!_in_
&amp;&amp;　||　=　:=　+=　-=　*=　/=　%=　+:=　-:=　*:=　/:=　%:=　,=</pre>
<p>関数名に上記の文字をを含まないように直すと、普通に動く可能性があります。<br />
(<a href="http://umeici.hp.infoseek.co.jp/bbs2.html" title="etcetera:bbs2.html" rel="nofollow">:::et cetera. - bbs</a>)より。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_4">トークに謎の「0」や「1」が混じってる<a class="anchor_super" id="c1c2cca9" href="#c1c2cca9" style="user-select:none;">&dagger;</a></h3>
<p>変数代入時、「i = 1」と書いたつもりが「i == 1」と書いてたりしませんか？</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_5">ランダムトークをしなくなってしまった<a class="anchor_super" id="h4d589f1" href="#h4d589f1" style="user-select:none;">&dagger;</a></h3>
<p>OnSecondChangeを消している可能性があります。<br />
消しているとOnAiTalkが呼び出されません。<br />
OnSecondChangeで何も行わない場合は<br /></p>
<pre>OnSecondChange{}</pre>
<p>と記述しておいて下さい。(<a href="http://www5d.biglobe.ne.jp/~satis/" rel="nofollow">SatisFactory</a>の雑記より)<br /></p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_6">うまく起動しない<a class="anchor_super" id="j321cb96" href="#j321cb96" style="user-select:none;">&dagger;</a></h3>
<p>スクリプトの構文ミスの可能性が高いです。<br />
文Ver.5の場合、文Ver.5の公開ページにある構文チェックツール「玉」を使うと、殆どの構文ミスを発見できます。</p>
<p><a href="tips/checking_dictionary_for_errors_using_tama.html" class="link_page_passage">Tips/Checking dictionary for errors using Tama</a></p>
<p>ハマりやすいミスの例。</p>
<ul class="list1 list-indent1"><li>' ' や &quot; &quot; の閉じ忘れ</li>
<li>' ' の中に ' 、 &quot; &quot; の中に &quot; が入っていた
<ul class="list2 list-indent1"><li>%(CHR(0x22)) = &quot; / %(CHR(0x27)) = ' です。活用してください。</li></ul></li>
<li>elseifをelse ifと書いた</li>
<li>ifを書かずにelseifからはじめてしまった</li>
<li>( ) や { } が多すぎ・少なすぎ
<ul class="list2 list-indent1"><li>括弧の対応をチェックできるテキスト編集ソフト（エディタ）を探しましょう</li></ul></li>
<li>変数名・関数名の大文字・小文字</li>
<li>一度も使ったことのない変数を利用しようとした
<ul class="list2 list-indent1"><li>使ったことのない変数を参照してもエラーになりません。</li></ul></li>
<li>辞書の文字コードの間違い
<ul class="list2 list-indent1"><li>UTF-8辞書を使っている方のみ。無論、ShiftJISで書いてしまうと大量の謎エラーに頭を抱えることになります。逆もしかり。</li></ul></li></ul>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_7">辞書中の特定の関数全てに「引数の型が不正です」エラー<a class="anchor_super" id="ab032f7a" href="#ab032f7a" style="user-select:none;">&dagger;</a></h3>
<p>関数を使用する時数値型の引数を入れないといけない部分に文字列型の引数を入れていたりその逆だったりすると、正しく記述した関数も含めてエラーが出てしまう場合があります。<br />
<br />
「数値型、又は文字列型ではない引数が入る可能性がある」でもアウトになる事もあります。TOINTやTOSTRを活用しましょう。<br /></p>
<ul class="list1 list-indent1"><li>例
<pre>i = TOSTR( i )
REPLACE( i , &quot;abc&quot; , &quot;bca&quot; )
</pre></li></ul>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_8">SAORI実行時にフリーズする<a class="anchor_super" id="e322a960" href="#e322a960" style="user-select:none;">&dagger;</a></h3>
<p>パスの書き方に問題があるのかもしれません。<br />
&quot;saori\\xxx.dll&quot;や&quot;saori/xxx.dll&quot;ではなく&quot;saori\xxx.dll&quot;と記述するようにしてください。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_9">SakuraScriptの[]の中に「]」を記述したい。<a class="anchor_super" id="bce1ca9e" href="#bce1ca9e" style="user-select:none;">&dagger;</a></h3>
<p>文字列全体を&quot;&quot;で囲んでください。<br />
「&quot;」で囲んだ中にある「&quot;」は「&quot;&quot;」と記述します。</p>
<pre class="aya">_txt=REPLACE(テキスト,'&quot;','&quot;&quot;')
_txt='&quot;' + _txt + '&quot;'
&quot;\![open,input,ID,-1,%(_txt)]&quot;</pre>
<p>簡単に使える関数を用意しました。</p>
<pre class="aya">ESCAPE_TEXT
{
	_r = _argv[0]
	if RE_SEARCH(_r,'[&quot;\[\]]') &gt;= 0 {
		'&quot;' + REPLACE(_r,'&quot;','&quot;&quot;') + '&quot;'
	}
	else {
		_r
	}
}</pre>
<p>をどこかに書いて</p>
<pre>ESCAPE_TEXT(テキスト)</pre>
<p>でうまく動くと思います。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_10">ゴースト配布時、どのファイルを消せばいいのかわからない<a class="anchor_super" id="s818c304" href="#s818c304" style="user-select:none;">&dagger;</a></h3>
<p>ghost\master内に以下のファイルがあれば、抜いておきましょう。
（***に入る文字列はゴーストの設定によって違います）</p>
<pre>***_variable.cfg　（セーブデータ）
***.log　（AYA/YAYA実行ログ）
ssp_shiori_log.txt （SSP実行ログ）
「profile」フォルダまるごと
「var」フォルダまるごと
tama.exe
aycencode.exe
暗号化前の***.dic （※辞書の暗号化をしている場合）</pre>
   
   	 	
	</div>
</div>




<table cellspacing=0 width=100%>
<tr><td id=footer>


<div id="lastmodified">
 Last modified on: 2016-11-27 (Sunday) 21:03:00<span class="page_passage"></span></div>


<div id="related">
 Related pages: <a href="MenuBar">MenuBar</a><span class="page_passage"></span>
 <a href="tips/checking_dictionary_for_errors_using_tama.html">Tips/Checking dictionary for errors using Tama</a><span class="page_passage"></span>
 <a href="startup/making_ghosts_with_yaya.html">StartUp/Making ghosts with YAYA</a><span class="page_passage"></span>
 <a href="index.html">FrontPage</a><span class="page_passage"></span>
 <a href="startup/migrate_from_satori.html">StartUp/Migrate from Satori</a><span class="page_passage"></span></div>


</td></tr>
</table>

<div id="interface_footer"></div>

<script src="interface.js"></script>

</body>
</html>
